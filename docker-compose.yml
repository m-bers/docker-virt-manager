services: 
  virt-manager:
    image: mber5/virt-manager:latest
    restart: always
    ports:
      - 8185:80

    environment:
    # Set DARK_MODE to true to enable dark mode
      DARK_MODE: false 
    # If connecting to remote libvirtd, you can use a qemu+ssh string like below. Default qemu:///system will connect to local libvirtd: 
    # HOSTS: "['qemu+ssh://user@host1/system', 'qemu+ssh://user@host2/system']"
      HOSTS: "['qemu:///system']"

    # If you want to use ssh-agent instead of copying ssh private keys specify path to the socket:
    # SSH_AUTH_SOCK: "/tmp/ssh_auth.sock"
    # Don't forget to uncomment corresponding settings in the `volumes` section.

    # If on an Ubuntu host (or any host with the libvirt AppArmor policy, you will need to use an ssh connection to localhost
    # or use qemu:///system and uncomment the below line to run the container in privileged mode: 
    # privileged: true

    volumes:
    # Volumes needed if connecting to local qemu:///system
      - "/var/run/libvirt/libvirt-sock:/var/run/libvirt/libvirt-sock"
      - "/var/lib/libvirt/images:/var/lib/libvirt/images"

    # If connecting to remote libvirtd, substitute location of ssh private key, e.g.:
      # - /home/user/.ssh/id_rsa:/root/.ssh/id_rsa:ro
      # OR you may create a volume to pass ssh-agent socket instead of copying ssh private keys.
      # For Linux:
      # - "${SSH_AUTH_SOCK}:/tmp/ssh_auth.sock"
      # For OS X and Windows:
      # - "/run/host-services/ssh-auth.sock:/tmp/ssh-auth.sock"
    devices:
    # Not needed if connecting to remote libvirtd
      - "/dev/kvm:/dev/kvm"
